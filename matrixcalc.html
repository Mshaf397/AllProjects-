<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Matrix Calculator</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 20px;
    }
    input[type=number] {
      width: 60px;
      margin: 2px;
      text-align: center;
    }
    .matrix {
      margin: 10px 0;
    }
    .matrix-row {
      display: flex;
    }
    button {
      margin: 5px;
    }
    .matrix-output {
      white-space: pre-wrap;
      font-family: monospace;
    }
  </style>
</head>
<body>

<h2>Matrix Calculator (up to 25×25)</h2>

<label>Rows: <input type="number" id="rows" min="1" max="25" value="3"></label>
<label>Columns: <input type="number" id="cols" min="1" max="25" value="3"></label>
<button onclick="generateMatrices()">Generate</button>

<h3>Matrix A</h3>
<div id="matrixA" class="matrix"></div>

<h3>Matrix B</h3>
<div id="matrixB" class="matrix"></div>

<button onclick="calculate('add')">A + B</button>
<button onclick="calculate('subtract')">A - B</button>
<button onclick="calculate('multiply')">A × B</button>
<button onclick="calculate('transposeA')">Transpose A</button>
<button onclick="calculate('transposeB')">Transpose B</button>
<button onclick="calculate('detA')">Det(A)</button>
<button onclick="calculate('detB')">Det(B)</button>

<h3>Result:</h3>
<div class="matrix-output" id="output"></div>

<script>
  function generateMatrices() {
    const rows = parseInt(document.getElementById("rows").value);
    const cols = parseInt(document.getElementById("cols").value);
    generateMatrix("matrixA", "a", rows, cols);
    generateMatrix("matrixB", "b", rows, cols);
    document.getElementById("output").textContent = '';
  }

  function generateMatrix(containerId, prefix, rows, cols) {
    const container = document.getElementById(containerId);
    container.innerHTML = '';
    for (let r = 0; r < rows; r++) {
      const rowDiv = document.createElement("div");
      rowDiv.className = "matrix-row";
      for (let c = 0; c < cols; c++) {
        const input = document.createElement("input");
        input.type = "number";
        input.id = `${prefix}_${r}_${c}`;
        input.value = "0";
        rowDiv.appendChild(input);
      }
      container.appendChild(rowDiv);
    }
  }

  function getMatrix(prefix, rows, cols) {
    const matrix = [];
    for (let r = 0; r < rows; r++) {
      const row = [];
      for (let c = 0; c < cols; c++) {
        const val = parseFloat(document.getElementById(`${prefix}_${r}_${c}`).value) || 0;
        row.push(val);
      }
      matrix.push(row);
    }
    return matrix;
  }

  function transpose(matrix) {
    return matrix[0].map((_, i) => matrix.map(row => row[i]));
  }

  function multiplyMatrices(A, B) {
    const result = Array(A.length).fill(0).map(() => Array(B[0].length).fill(0));
    for (let i = 0; i < A.length; i++) {
      for (let j = 0; j < B[0].length; j++) {
        for (let k = 0; k < B.length; k++) {
          result[i][j] += A[i][k] * B[k][j];
        }
      }
    }
    return result;
  }

  function determinant(matrix) {
    const n = matrix.length;
    if (n > 10) return "Determinant too large to compute";
    if (n !== matrix[0].length) return "Not a square matrix";
    if (n === 1) return matrix[0][0];
    if (n === 2) return matrix[0][0]*matrix[1][1] - matrix[0][1]*matrix[1][0];

    let det = 0;
    for (let c = 0; c < n; c++) {
      const subMatrix = matrix.slice(1).map(row => row.filter((_, j) => j !== c));
      det += ((c % 2 === 0 ? 1 : -1) * matrix[0][c] * determinant(subMatrix));
    }
    return det;
  }

  function calculate(op) {
    const rows = parseInt(document.getElementById("rows").value);
    const cols = parseInt(document.getElementById("cols").value);
    const A = getMatrix("a", rows, cols);
    const B = getMatrix("b", rows, cols);
    let result;

    switch (op) {
      case 'add':
        result = A.map((row, i) => row.map((val, j) => val + B[i][j]));
        break;
      case 'subtract':
        result = A.map((row, i) => row.map((val, j) => val - B[i][j]));
        break;
      case 'multiply':
        if (A[0].length !== B.length) return display("Cannot multiply: incompatible dimensions");
        result = multiplyMatrices(A, B);
        break;
      case 'transposeA':
        result = transpose(A);
        break;
      case 'transposeB':
        result = transpose(B);
        break;
      case 'detA':
        return display("Det(A) = " + determinant(A));
      case 'detB':
        return display("Det(B) = " + determinant(B));
    }

    displayMatrix(result);
  }

  function displayMatrix(matrix) {
    const str = matrix.map(row => row.join("\t")).join("\n");
    document.getElementById("output").textContent = str;
  }

  function display(text) {
    document.getElementById("output").textContent = text;
  }

  generateMatrices();
</script>

</body>
</html>