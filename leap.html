<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Custom Leap Year System Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .custom-scrollbar::-webkit-scrollbar {
            width: 6px;
        }
        .custom-scrollbar::-webkit-scrollbar-track {
            background: #f1f5f9;
        }
        .custom-scrollbar::-webkit-scrollbar-thumb {
            background: #cbd5e1;
            border-radius: 10px;
        }
        .year-card {
            transition: transform 0.2s ease, box-shadow 0.2s ease;
        }
        .year-card:hover {
            transform: translateY(-2px);
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen text-slate-900 font-sans">

    <div class="max-w-4xl mx-auto px-4 py-8">
        <header class="mb-10 text-center">
            <h1 class="text-4xl font-extrabold text-indigo-700 tracking-tight mb-2">
                Leap Year Engine
            </h1>
            <p class="text-slate-500 italic">Generate perfectly distributed orbital calendars</p>
        </header>

        <div class="grid grid-cols-1 md:grid-cols-3 gap-8">
            <!-- Sidebar Controls -->
            <aside class="md:col-span-1 space-y-6">
                <div class="bg-white p-6 rounded-3xl shadow-sm border border-slate-200">
                    <h2 class="text-lg font-bold mb-4 flex items-center text-slate-700">
                        <svg class="w-5 h-5 mr-2 text-indigo-500" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37a1.724 1.724 0 002.572-1.065z"></path><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 12a3 3 0 11-6 0 3 3 0 016 0z"></path></svg>
                        Parameters
                    </h2>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">Days per Cycle</label>
                            <input id="daysInput" type="number" value="1461" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none transition-all font-mono">
                        </div>
                        <div>
                            <label class="block text-xs font-bold text-slate-500 uppercase tracking-wider mb-1">Years per Cycle</label>
                            <input id="yearsInput" type="number" value="4" class="w-full bg-slate-50 border border-slate-200 rounded-xl px-4 py-3 focus:ring-2 focus:ring-indigo-500 outline-none transition-all font-mono">
                        </div>
                    </div>

                    <div class="mt-8 p-4 bg-indigo-50 rounded-2xl border border-indigo-100">
                        <h3 class="text-xs font-bold text-indigo-700 uppercase mb-2">The Rulebook</h3>
                        <ul class="text-[11px] text-indigo-900 space-y-2 leading-relaxed opacity-80">
                            <li>• $d = \text{round}(\text{days} / \text{years})$</li>
                            <li>• Round Down $\rightarrow$ Leap is $d + 1$</li>
                            <li>• Round Up $\rightarrow$ Leap is $d - 1$</li>
                            <li>• Distribution uses Bresenham spacing</li>
                        </ul>
                    </div>
                </div>
            </aside>

            <!-- Main Content -->
            <main class="md:col-span-2 space-y-6">
                <!-- Summary Stats -->
                <div class="grid grid-cols-2 gap-4">
                    <div class="bg-white p-5 rounded-3xl border border-slate-200 shadow-sm">
                        <span class="text-[10px] font-bold text-slate-400 uppercase tracking-widest block mb-1">Common Year</span>
                        <div id="commonYearResult" class="text-3xl font-black text-slate-700">--</div>
                    </div>
                    <div class="bg-indigo-600 p-5 rounded-3xl shadow-indigo-200 shadow-xl">
                        <span class="text-[10px] font-bold text-indigo-200 uppercase tracking-widest block mb-1">Leap Year</span>
                        <div id="leapYearResult" class="text-3xl font-black text-white">--</div>
                    </div>
                </div>

                <!-- Visual Timeline -->
                <div class="bg-white rounded-3xl border border-slate-200 shadow-sm overflow-hidden">
                    <div class="px-6 py-4 border-b border-slate-100 flex justify-between items-center bg-slate-50/50">
                        <h2 class="font-bold text-slate-700">Cycle Distribution</h2>
                        <span id="cycleInfo" class="text-xs font-medium text-slate-500"></span>
                    </div>
                    
                    <div id="scheduleGrid" class="p-6 grid grid-cols-2 sm:grid-cols-3 lg:grid-cols-4 gap-3 max-h-[500px] overflow-y-auto custom-scrollbar">
                        <!-- Years injected here -->
                    </div>
                </div>

                <div id="emptyState" class="hidden p-12 text-center bg-white rounded-3xl border border-dashed border-slate-300 text-slate-400">
                    Enter valid numbers to view the cycle.
                </div>
            </main>
        </div>
    </div>

    <script>
        const daysInput = document.getElementById('daysInput');
        const yearsInput = document.getElementById('yearsInput');
        const commonYearResult = document.getElementById('commonYearResult');
        const leapYearResult = document.getElementById('leapYearResult');
        const scheduleGrid = document.getElementById('scheduleGrid');
        const cycleInfo = document.getElementById('cycleInfo');
        const emptyState = document.getElementById('emptyState');

        function updateGenerator() {
            const days = parseFloat(daysInput.value);
            const years = parseInt(yearsInput.value);

            if (isNaN(days) || isNaN(years) || years <= 0 || days <= 0) {
                scheduleGrid.innerHTML = '';
                emptyState.classList.remove('hidden');
                commonYearResult.innerText = '--';
                leapYearResult.innerText = '--';
                return;
            }

            emptyState.classList.add('hidden');

            const exactAverage = days / years;
            const commonDays = Math.round(exactAverage);
            const isRoundUp = commonDays > exactAverage;
            
            // Logic based on rounding direction
            const leapDays = isRoundUp ? commonDays - 1 : commonDays + 1;
            
            // Find L: (Common * (Years - L)) + (Leap * L) = Days
            // Days = Common*Years - Common*L + Leap*L
            // Days - Common*Years = L(Leap - Common)
            const numLeapYears = Math.abs(days - (commonDays * years));

            commonYearResult.innerText = `${commonDays}d`;
            leapYearResult.innerText = `${leapDays}d`;
            cycleInfo.innerText = `${numLeapYears} leap years / ${years} years`;

            // Distribution Logic
            let html = '';
            let accumulator = 0;

            for (let y = 1; y <= years; y++) {
                accumulator += numLeapYears;
                let isLeap = false;
                if (accumulator >= years) {
                    isLeap = true;
                    accumulator -= years;
                }

                const dayCount = isLeap ? leapDays : commonDays;
                
                html += `
                    <div class="year-card p-4 rounded-2xl border ${isLeap ? 'bg-indigo-50 border-indigo-200' : 'bg-white border-slate-100'}">
                        <div class="flex justify-between items-start mb-1">
                            <span class="text-[10px] font-bold text-slate-400">YR ${y}</span>
                            ${isLeap ? '<span class="bg-indigo-600 text-[8px] text-white px-1.5 py-0.5 rounded-full font-bold uppercase">Leap</span>' : ''}
                        </div>
                        <div class="text-xl font-mono font-black ${isLeap ? 'text-indigo-700' : 'text-slate-600'}">
                            ${dayCount}d
                        </div>
                    </div>
                `;
            }

            scheduleGrid.innerHTML = html;
        }

        [daysInput, yearsInput].forEach(el => el.addEventListener('input', updateGenerator));

        // Init
        updateGenerator();
    </script>
</body>
</html>

